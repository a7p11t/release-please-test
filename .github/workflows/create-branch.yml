# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Issueが作成されたときにワークフローをトリガーする
  issues:
    types: [opened]

jobs:
  create_issue_branch_job:
    runs-on: ubuntu-latest
    steps:
      # https://www.docswell.com/s/_n13u_/K1JG4E-2024-02-27-mierunebbq#p19
      - name: create branch
        run: |
          # Issueに記載されたブランチ名を取得する
          branch_name=$(echo "$BODY" | grep -A 2 "### Branch Name" | tail -n 1)
          echo "$branch_name"
          # Issueに紐づくブランチを作成する
          gh issue develop $NUMBER --name "$branch_name"
        env:
          # ghコマンドの実行に必須
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          ## IssueのIDを取得する
          NUMBER: ${{ github.event.issue.number }}
          ## bodyを取得する
          BODY: ${{ github.event.issue.body }}

